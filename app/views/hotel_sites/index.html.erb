<div class="page-header">
  <h2 class="header-title">Hotel & Site relation</h2>
  <div class="header-sub-title">
    <nav class="breadcrumb breadcrumb-dash">
      <a href="/" class="breadcrumb-item"><i class="ti-home p-r-5"></i>Home</a>
      <span class="breadcrumb-item active">relations</span>
    </nav>
  </div>
</div>
<div class="card">
  <div class="card-body">
<%= search_form_for @q do |f| %>
      <%= f.label :site_cont %>
      <div class="row" >
<div class="col-7">

  <%= f.select :site_id_eq, Site.all.map{|e| [e.name, e.id]}, {}, class: 'form-control' %>
</div>
      <div class="col-4">
  <%= f.submit 'Search', class: "btn btn-gradient-success" %>
      </div>
      </div>
<% end %>
    <br>

    <button data-toggle="modal" data-target="#side-modal-r" class="btn btn-gradient-success">New Hotel Site</button>


<table class="table table-bordered table-striped table-hover">
  <thead>
  <tr>
    <th>Hotel</th>
    <th>Site</th>
    <th colspan="2"></th>
  </tr>
  </thead>

  <tbody>
  <% @hotel_sites.each do |hotel_site| %>
    <tr>
      <td><%= hotel_site.hotel.name %></td>
      <td><%= hotel_site.site.name %></td>
      <td>
        <button data-toggle="modal" data-target="#side-modal-r<%= hotel_site.id %>" class="btn btn-gradient-success">
          Edit
        </button>
      </td>
    </tr>
    <div class="modal modal-right fade " id="side-modal-r<%= hotel_site.id %>">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="side-modal-wrapper">
            <div class="vertical-align">
              <div class="table-cell">
                <div class="modal-body">
                  <div class="p-h-15">
                    <h4>New</h4>
                    <p class="m-b-15 font-size-13">Please new hotel site</p>
                    <%= form_with(model: hotel_site, local: true) do |f| %>
                      <div class="form-group">
                        <%= f.select :site_id_eq, Site.all.map{|e| [e.name, e.id]}, {},  class: 'form-control' %>
                      </div>
                      <div class="form-group">
                        <%= f.select :hotel_id_eq, Hotel.all.map{|e| [e.name, e.id]}, {}, class: 'form-control' %>
                      </div>
                      <div class="form-group">
                        <%= f.text_field :link, class: "form-control" %>
                      </div>

                      <br>
                      <%= f.submit 'Save', class: "btn btn-success" %>

                    <% end %>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>
  <% end %>
  </tbody>
</table>
  </div>
</div>
<div class="modal modal-right fade " id="side-modal-r">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="side-modal-wrapper">
        <div class="vertical-align">
          <div class="table-cell">
            <div class="modal-body">
              <div class="p-h-15">
                <h4>New</h4>
                <p class="m-b-15 font-size-13">Please new hotel site</p>
                <%= form_with(model: @hotel_site, local: true) do |f| %>
                  <div class="form-group">
                    <%= f.select :site_id_eq, Site.all.map{|e| [e.name, e.id]}, {},  class: 'form-control' %>
                  </div>
                  <div class="form-group">
                    <%= f.select :hotel_id_eq, Hotel.all.map{|e| [e.name, e.id]}, {}, class: 'form-control' %>
                  </div>
                  <div class="form-group">
                    <%= f.text_field :link, class: "form-control" %>
                  </div>

                  <br>
                  <%= f.submit 'Save', class: "btn btn-success" %>

                <% end %>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>